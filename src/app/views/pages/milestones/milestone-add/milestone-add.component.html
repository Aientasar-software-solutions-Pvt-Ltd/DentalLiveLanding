<ol *ngIf="!hasCase" class="breadcrumb">
  <!-- breadcrumb -->
  <li class="breadcrumb-item">
    <a routerLink="/dashboard"
      ><i class="bx bxs-home" aria-hidden="true"></i> Dashboard</a
    >
  </li>
  <li class="breadcrumb-item">
    <a routerLink="{{ formInterface.section.backUrl }}">Milestones</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    {{ mode }} Milestone
  </li>
</ol>

<div
  *ngIf="
    formInterface.isUploadingData ||
    formInterface.isLoadingData ||
    formInterface.isLoadingDependencies
  "
  class="row"
>
  <div class="col-md-12">
    <lottie-player
      class="mt-3 m-auto"
      src="https://assets6.lottiefiles.com/packages/lf20_fhsx0ijl/lottie/collections-feature.json"
      background="transparent"
      speed="1"
      style="width: 300px; height: 300px"
      loop
      autoplay
    ></lottie-player>
    <h6 class="text-center mt-5">
      Request Processing â€¦..Please Wait, Do Not Close The Page
    </h6>
  </div>
</div>

<div
  [hidden]="
    formInterface.isUploadingData ||
    formInterface.isLoadingData ||
    formInterface.isLoadingDependencies
  "
  class="row align-items-center pt-2"
>
  <form #mainForm="ngForm" id="mainForm" (ngSubmit)="customSubmit()">
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header border-bottom-0 bg-white">
          <div class="row">
            <div class="col-md-5 align-self-center">
              <h5 class="body1 card-title my-2">{{ mode }} Milestone</h5>
            </div>
            <div class="col-md-7 text-end">
              <a
                [routerLink]="
                  hasCase
                    ? '/cases/cases/case-view/' +
                      this.formInterface.object.caseId +
                      '/milestones'
                    : formInterface.section.backUrl
                "
                class="btn btn-default"
                >Back
              </a>
            </div>
          </div>
        </div>
        <div class="card-body" style="background: #e4f0ff">
          <div class="row mt-2">
            <div class="col-md-12">
              <div class="row">
                <div *ngIf="!hasCase" class="col-md-6 mb-4">
                  <label class="form-label body2 text-dark">Case Title</label>
                  <ng-select
                    dropdownPosition="bottom"
                    [items]="formInterface.dependentData['cases']"
                    [(ngModel)]="formInterface.object.caseId"
                    [editableSearchTerm]="true"
                    (change)="selectCase($event)"
                    name="caseId"
                    placeholder="Please Select A Case To Continue"
                    bindLabel="title"
                    bindValue="caseId"
                    required
                  ></ng-select>
                </div>
                <div class="col-md-6">
                  <div class="mb-4">
                    <label class="form-label body2 text-dark">Title </label>
                    <input
                      class="form-control"
                      type="text"
                      placeholder="Enter Title"
                      name="title"
                      id="title"
                      [(ngModel)]="formInterface.object.title"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="mb-4">
                    <label class="form-label body2 text-dark"
                      >Description</label
                    >
                    <app-cvfast-new #cvfast></app-cvfast-new>
                  </div>
                </div>
                <div class="col-ms-6 col-md-4">
                  <div class="mb-4">
                    <label class="form-label body2 mb-3 text-dark"
                      >Start Date & Time</label
                    >
                    <input
                      type="datetime-local"
                      class="form-control"
                      name="startdate"
                      id="startdate"
                      min="{{
                        formInterface.object.startdate
                          | date : 'yyyy-MM-dd hh:mm'
                      }}"
                      [ngModel]="
                        formInterface.object.startdate
                          | date : 'yyyy-MM-dd hh:mm'
                      "
                      (ngModelChange)="
                        formInterface.assignDate('startdate', $event)
                      "
                      required
                    />
                  </div>
                </div>
                <div class="col-ms-6 col-md-4">
                  <div class="mb-4">
                    <label class="form-label body2 mb-3 text-dark"
                      >Due Date & Time</label
                    >
                    <input
                      type="datetime-local"
                      class="form-control"
                      name="duedate"
                      id="duedate"
                      min="{{
                        formInterface.object.startdate
                          | date : 'yyyy-MM-dd hh:mm'
                      }}"
                      [ngModel]="
                        (formInterface.object.duedate >
                        formInterface.object.startdate
                          ? formInterface.object.duedate
                          : formInterface.object.startdate
                        ) | date : 'yyyy-MM-dd hh:mm'
                      "
                      (ngModelChange)="
                        formInterface.assignDate('duedate', $event)
                      "
                      required
                    />
                    <owl-date-time #dt1></owl-date-time>
                  </div>
                </div>
                <div class="col-ms-6 col-md-4">
                  <div class="mb-4">
                    <label class="form-label body2 mb-3 text-dark"
                      >Add Reminder</label
                    >
                    <select
                      class="form-select"
                      name="reminder"
                      id="reminder"
                      [ngModel]="formInterface.object.reminder"
                      (ngModelChange)="toInt('reminder', $event)"
                      required
                    >
                      <option value="0">Select</option>
                      <option value="12" selected>12 Hours</option>
                      <option value="24">1 Day</option>
                      <option value="48">2 Days</option>
                      <option value="72">3 Days</option>
                      <option value="120">5 Days</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12 mt-3">
      <button type="submit" class="btn btn-default me-2">
        <i class="bx bx-save"></i> {{ mode }} Milestone
      </button>
      <a
        [routerLink]="
          hasCase
            ? '/cases/cases/case-view/' +
              this.formInterface.object.caseId +
              '/milestones'
            : formInterface.section.backUrl
        "
        class="btn btn-secondary"
        >Cancel</a
      >
      <!-- <button
        *ngIf="formInterface.object.milestoneId"
        (click)="formInterface.deleteData(formInterface.object.milestoneId)"
        type="button"
        class="btn btn-danger me-2 float-end"
      >
        Delete Milestone
      </button> -->
    </div>
  </form>
</div>
