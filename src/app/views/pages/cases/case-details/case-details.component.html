<div class="row align-items-center">
  <div class="col-md-12">
    <ng-container class="mt-3" *ngIf="isLoadingData">
      <div class="col-md-12">
        <lottie-player
          class="mt-3 m-auto"
          src="https://assets6.lottiefiles.com/packages/lf20_fhsx0ijl/lottie/collections-feature.json"
          background="transparent"
          speed="1"
          style="width: 300px; height: 300px"
          loop
          autoplay
        ></lottie-player>
        <h6 class="text-center mt-5">
          Request Processing â€¦..Please Wait, Do Not Close The Page
        </h6>
      </div>
    </ng-container>
    <div *ngIf="!isLoadingData" class="card-body p-0 pb-3">
      <div class="row pt-4">
        <div class="col-md-12">
          <div class="card shadow-sm">
            <div class="card-header bg-white">
              <h5 class="body1 card-title my-2">
                Case Details
                <a
                 tippy="Tutorial"
                  target="_blank"
                  [routerLink]="
                    '/tutorial/' +
                    utility.tutorialData['CaseDetailsComponent'].html
                  "
                >
                  <i class="bx bxs-info-circle text-primary"></i
                ></a>
              </h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6 col-lg-8">
                  <div class="row">
                    <div class="col-md-12 col-lg-7">
                      <div class="row gx-2">
                        <label
                          class="text-muted col-5 col-sm-3 col-md-4 col-lg-3 mb-2"
                          >Case Title :</label
                        >
                        <div class="mb-3 col-7 col-sm-9 col-md-8 col-lg-9">
                          <strong>{{ baseData.title }}</strong>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-12 col-lg-5">
                      <div class="row">
                        <div class="col-sm-6 col-md-6 col-lg-12">
                          <div class="row gx-2">
                            <label
                              class="text-muted col-5 col-md-12 col-lg-6 mb-2"
                              >Date of Creation :</label
                            >
                            <div class="mb-3 col-7 col-md-12 col-lg-6">
                              <strong>{{
                                baseData.dateCreated | date : "mediumDate"
                              }}</strong>
                            </div>
                          </div>
                        </div>
                        <div class="col-sm-6 col-md-6 col-lg-12">
                          <div class="row gx-2">
                            <label
                              class="text-muted col-5 col-md-12 col-lg-6 mb-2"
                              >Last Update :
                            </label>
                            <div class="mb-3 col-7 col-md-12 col-lg-6">
                              <strong>{{
                                baseData.dateUpdated | date : "mediumDate"
                              }}</strong>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4">
                  <div class="bg-light p-2 border rounded mb-3">
                    <div class="row gx-2">
                      <label class="text-muted col-sm-4 col-md-4 col-lg-5 mb-2"
                        >Type of<br />
                        Dental Case :
                      </label>
                      <div class="mb-3 col-sm-8 col-md-8 col-lg-7">
                        <strong
                          *ngFor="let id of baseData.caseType; let i = index"
                          >{{ getCaseType(id)
                          }}<span *ngIf="i < baseData.caseType.length - 1">
                            ,
                          </span></strong
                        >
                      </div>
                    </div>
                    <div class="row gx-2">
                      <label class="text-muted col-sm-4 col-md-4 col-lg-5 mb-2"
                        >Case Status :
                      </label>
                      <div class="mb-3 col-sm-8 col-md-8 col-lg-7">
                        <span
                          class="badge rounded-pill badge-success body2"
                          *ngIf="baseData.caseStatus == true"
                          >Active</span
                        >
                        <span
                          class="badge rounded-pill badge-warning body2"
                          *ngIf="baseData.caseStatus == false"
                          >Inactive</span
                        >
                      </div>
                    </div>
                    <div class="row gx-2">
                      <label
                        class="text-muted col-6 col-sm-4 col-md-4 col-lg-5 mb-2"
                        >Case Owner :
                      </label>
                      <div class="mb-3 col-6 col-sm-8 col-md-8 col-lg-7">
                        <strong *ngIf="baseData; else emptyresorceownerone">{{
                          baseData.resourceOwner
                        }}</strong>

                        <ng-template #emptyresorceownerone>
                          <strong></strong>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="collapse" id="detailsCard">
                <div
                  class="row"
                  *ngIf="
                    baseData.description.text.toString().trim() != '' ||
                    baseData.description.links.length > 0
                  "
                >
                  <div class="col-md-12">
                    <div class="mb-3">
                      <h5 class="body1 card-title my-2">Case Description</h5>
                      <app-cvfast-viewer
                        *ngIf="showDescription"
                        [cvfast]="baseData.description"
                      ></app-cvfast-viewer>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="float-end"
                *ngIf="baseData.resourceOwner == user.emailAddress"
              >
                <a
                  routerLink="/cases/cases/case-edit/{{ baseData.caseId }}"
                  class="btn btn-light-green px-3"
                  tippy="Edit"
                  ><i class="bx bx-pencil fs-5 align-middle"></i> Edit</a
                >
              </div>
              <a
                class="text-primary fw-bold py-3"
                data-bs-toggle="collapse"
                href="#detailsCard"
                (click)="
                  !showDescription ? (showDescription = !showDescription) : null
                "
              >
                Show more...
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <app-case-threads *ngIf="!isLoadingData"></app-case-threads>
  </div>
</div>
