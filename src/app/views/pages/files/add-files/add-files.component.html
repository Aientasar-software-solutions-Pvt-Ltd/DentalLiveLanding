<ol *ngIf="!hasCase" class="breadcrumb">
  <!-- breadcrumb -->
  <li class="breadcrumb-item">
    <a routerLink="/dashboard"
      ><i class="bx bxs-home" aria-hidden="true"></i> Dashboard</a
    >
  </li>
  <li class="breadcrumb-item">
    <a routerLink="{{ formInterface.section.backUrl }}">Files</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">Add File</li>
</ol>

<div
  *ngIf="
    formInterface.isUploadingData ||
    formInterface.isLoadingData ||
    formInterface.isLoadingDependencies
  "
  class="row"
>
  <div class="col-md-12">
    <lottie-player
      class="mt-3 m-auto"
      src="https://assets6.lottiefiles.com/packages/lf20_fhsx0ijl/lottie/collections-feature.json"
      background="transparent"
      speed="1"
      style="width: 300px; height: 300px"
      loop
      autoplay
    ></lottie-player>
    <h6 class="text-center mt-5">
      Request Processing â€¦..Please Wait, Do Not Close The Page
    </h6>
  </div>
</div>

<div
  [hidden]="
    formInterface.isUploadingData ||
    formInterface.isLoadingData ||
    formInterface.isLoadingDependencies
  "
  class="row align-items-center pt-2"
>
  <form
    #mainForm="ngForm"
    id="mainForm"
    (ngSubmit)="formInterface.submitFiles()"
  >
    <div class="col-md-12">
      <div class="card shadow-sm">
        <div class="card-header border-bottom-0 bg-white">
          <div class="row">
            <div class="col-md-5 align-self-center">
              <h5 class="body1 card-title my-2">{{ mode }} File</h5>
            </div>
            <div class="col-md-7 text-end">
              <a
                [routerLink]="
                  hasCase
                    ? '/cases/cases/case-view/' +
                      this.formInterface.object.caseId +
                      '/files'
                    : formInterface.section.backUrl
                "
                class="btn btn-default"
                >Back
              </a>
            </div>
          </div>
        </div>
        <div class="card-body" style="background: #e4f0ff">
          <div class="row mt-2">
            <div *ngIf="!hasCase" class="col-md-12 mb-4">
              <label class="form-label body2 text-dark">Case Title</label>
              <ng-select
                dropdownPosition="bottom"
                [items]="formInterface.dependentData['cases']"
                [(ngModel)]="formInterface.object.caseId"
                [editableSearchTerm]="true"
                (change)="selectCase($event)"
                name="caseId"
                placeholder="Select"
                bindLabel="title"
                bindValue="caseId"
                required
              ></ng-select>
            </div>

            <div class="col-md-12">
              <div class="mb-4">
                <label class="form-label body2 text-dark">Files</label>
                <input
                  type="file"
                  multiple
                  name="uploadfile"
                  id="uploadfile"
                  (change)="loadBinaryFiles($event)"
                  class="form-control"
                  style="
                    line-height: 2.2;
                    background-color: #eff3f7;
                    border: 2px dashed #aeb4bf;
                  "
                  required
                  accept="application/msword,.xls,.xlsx,image/*,video/*,audio/*,.pdf"
                />
              </div>
            </div>
            <ul class="list-group">
              <li
                *ngFor="
                  let file of formInterface.object.newUploadedFiles;
                  let i = index
                "
                #attachment
                class="animate__animated animate__faster animate__lightSpeedInLeft list-group-item"
              >
                <label>{{ file["name"] }}</label>
                <strong
                  (click)="removeFiles(i, attachment, true)"
                  style="cursor: pointer"
                  class="float-end text-danger"
                  >Delete</strong
                >
              </li>
            </ul>
            <ul class="list-group">
              <li
                *ngFor="
                  let file of this.formInterface.object.files;
                  let i = index
                "
                #attachment
                class="animate__animated animate__faster animate__lightSpeedInLeft list-group-item"
              >
                <label>{{ file }}</label>
                <strong
                  (click)="removeFiles(i, attachment, false)"
                  style="cursor: pointer"
                  class="float-end text-danger"
                  >Delete</strong
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12 mt-3">
      <button type="submit" class="btn btn-default me-2">
        <i class="bx bx-folder-plus"></i> {{ mode }} Files
      </button>
      <a
        [routerLink]="
          hasCase
            ? '/cases/cases/case-view/' +
              this.formInterface.object.caseId +
              '/files'
            : formInterface.section.backUrl
        "
        class="btn btn-secondary"
        >Cancel</a
      >
      <!-- <button
        *ngIf="formInterface.object.fileUploadId"
        (click)="customDelete()"
        type="button"
        class="btn btn-danger me-2 float-end"
      >
        Delete Files
      </button> -->
    </div>
  </form>
</div>
